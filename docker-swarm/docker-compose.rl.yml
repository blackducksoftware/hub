version: '3.6'
# Starting with the 2019.2.0 release: DO NOT EDIT THIS FILE!!!
# ADD ANY OF YOUR OVERRIDES IN THE docker-compose.local-overrides.yml FILE
# Refer to the Release Notes or Installation Guide for more information.
services:
  rlservice:
    image: blackducksoftware/rl-service:2024.7.3
    user: rlservice:root
    links: [cfssl, rabbitmq, logstash, webserver, storage]
    env_file: [hub-rl.env, blackduck-config.env]
    entrypoint: /usr/local/bin/docker-entrypoint.sh
    healthcheck:
      test: curl --fail http://localhost:8080/rlservice/health || exit 1
      interval: 30s
      timeout: 60s
      retries: 15
      start_period: 7200s
    deploy:
      mode: replicated
      replicas: 1
      restart_policy: {condition: on-failure, delay: 5s, window: 60s}
      resources:
        limits: {memory: 6144M, cpus: '2'}
        reservations: {memory: 6144M, cpus: '2'}
